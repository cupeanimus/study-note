2. 서비스 생성하기

2.2 의존성과 설정값은 생성자 인자로 주입한다
2.2.1 짝 지은 설정값은 함께 둔다
2.3 필요한 것의 위치가 아니라 필요한 것 자체를 주입한다.
(여러 설정값이나 서비스를 담은 특별한 객체(서비스 위치 지정자, 관리자, 레지스트리 또는 컨테이너)를 호출하지말고 필요한 서비스만 생성자 인자로 주입한다)
이는 해당 객체들의 의존성과 기능을 보다 명확하게 알 수 있게 한다.
2.4 모든 생성자 인자는 필수여야 한다 - 인스턴스를 만드는 방법을 보고 그 객체가 어떻게 구성되어 있는지 간단히 알 수 있기 때문
2.5 생성자 주입만 사용한다
-설정자 주입으로 생성시 위배되는 규칙
    객체를 불완전한 상태로 생성할 수 없어야 한다
    서비스는 불변이어야 한다. 즉 인스턴스 생성을 마친 후에는 바꿀 수 없어야 한다.
2.6 선택적인 의존성 같은건 없다
2.7 모든 의존성을 명시한다
2.7.1 정적 의존성을 객체 의존성으로 바꾼다
-전역으로 어디서든 호출할 수 있는 ServiceRegistry.get(), Cache.get() 과 같은 것을 생성자 인자로 가져오게 코드를 재작성한다
2.7.2 복잡한 함수를 객체 의존성으로 바꾼다

모든 함수를 객체 의존성으로 승격해야할까 고민될때는
    -이 의존성으로 제공한 행위를 나중에 대체하거나 개선하고 싶은가?
    -이 의존성의 행위가 복잡해서 단지 코드 몇 줄로는 같은 결과를 얻을 수 없는가?
    -해당 함수를 기본 타입 값 대신 객체로 처리할 수 있는가?
에 대해 대부분 '예'라면 객체 의존성으로 바꾸는게 좋다

2.7.3 시스템 호출을 명백히 한다 (테스트시 불안정성을 해결(예. 현재시각을 호출할때 시스템 호출을 매번 한다면 테스트 시점마다 값이 다름))

2.8 작업 관련 데이터는 생성자 인자가 아니라 메서드 인자로 전달한다(재사용성을 위해)

2.9 서비스의 인스턴스를 만든 후에는 행위를 바꾸지 못하게 한다
-해당 객체의 값을 업데이트를 할 때가 많다. 이럴때 메서드를 통해 객체안의 값을 바꾸곤 했는데
최근 불변 객체에 대한 생각이 많이 들고 있다.
변경이 필요하다면. 그 시점에 해당 이벤트를 행한 새로운 객체를 만드는 것을 생각하게 되었는데.
이러한 것에 자원에 대한 낭비는 아닌지?(미약하다는 것을 알고 있다)라는 염려로 주저하게 된다.
하지만 객체를 바라보는 시선에 따라 보다 명확하게 하기 위해 인스턴스를 만든 후 변경 불가능하도록 하는것이 좋다고 생각된다.

2.10 생성자에는 속성에 할당하는 일만 한다

2.11 인자가 유효하지 않으면 예외를 일으킨다

2.12 서비스는 적은 수의 진입점이 있는 변경 가능 객체 그래프로 정의한다
    -응용 프로그램 내 모든 서비스가 커다란 객체 그래프 하나를 형성한다
    -진입점이 제어기다
    -서비스를 가져오는 데 서비스 위치 지정자가 필요한 서비스가 없다
    
이 장에선 객체는 명확해야 한다는 점, 서비스 의존성은 명시적이여야 한다는 것을 얘기하고 있다.

 



    
     